---
layout: post
title: Java虚拟机-学习笔记
date: 2017-11-13
categories: blog
tags: [学习笔记]
description: 
---

# 一、类加载器子系统


# 二、运行时数据区
![Java虚拟机运行时数据](img/jvm/2-1-0.png)

#### 所有线程共享数据区
1、方法区（Method Area）
用于存储虚拟机加载的类信息、常量、静态变量、即时编译器编译后的代码等数据
还包括运行时常量池。

2、JAVA堆（JAVA Heap）--内存最大的一块
所有的对象实例以及数组都要在堆上分配

#### 线程之间隔离的数据库
3、计数器(PC)
每个线程都有单独的PC寄存器，用于保存当前执行指令的地址，一旦指令执行，PC寄存器将更新到下一条指令。
4、本地方法栈

5、JVM栈(JVM Stack)



# 三、执行引擎



# 四、其他
### 4、1为什么要分代
分代的垃圾回收策略，是基于这样一个事实：不同的对象的生命周期是不一样的。因此，不同生命周期的对象可以采取不同的收集方式，以便提高回收效率。
在Java程序运行的过程中，会产生大量的对象，其中有些对象是与业务信息相关，比如Http请求中的Session对象、线程、Socket连接，这类对象跟业务直接挂钩，因此生命周期比较长。但是还有一些对象，主要是程序运行过程中生成的临时变量，这些对象生命周期会比较短，比如：String对象，由于其不变类的特性，系统会产生大量的这些对象，有些对象甚至只用一次即可回收。
试想，在不进行对象存活时间区分的情况下，每次垃圾回收都是对整个堆空间进行回收，花费时间相对会长，同时，因为每次回收都需要遍历所有存活对象，但实际上，对于生命周期长的对象而言，这种遍历是没有效果的，因为可能进行了很多次遍历，但是他们依旧存在。因此，分代垃圾回收采用分治的思想，进行代的划分，把不同生命周期的对象放在不同代上，不同代上采用最适合它的垃圾回收方式进行回收。





